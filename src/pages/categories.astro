---
import BaseHeader from "@components/BaseHeader";
import Nav from "@components/Nav";
import { IFrontmatter } from "@typings";

const thisTitle = "Categories";
const thisDescription = "Categories";
const thisPermalink = `${Astro.site.toString()}categories`;

const allMarkdownPosts = await Astro.glob<IFrontmatter>("./posts/*.md");
const allCategories = [
  ...new Set(allMarkdownPosts.map((p) => p.frontmatter.categories).flat())
];
---

<html lang="en">
  <head>
    <BaseHeader
      pageTitle={thisTitle}
      pageDescription={thisDescription}
      pagePermalink={thisPermalink}
    />
  </head>
  <body>
    <Nav />
    {allCategories.map(category => <a href={`/categories/${category}/`}>{category}</a>)}
  </body>
</html>
